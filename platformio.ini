; PlatformIO Configuration for DOPE-ASS / Ballistic Core Engine
; Two environments: esp32p4 (target hardware) and native (desktop testing)

[env]
lib_deps =
lib_extra_dirs = lib
build_flags =
    -std=gnu++17
    -DBCE_VERSION_MAJOR=1
    -DBCE_VERSION_MINOR=3
    -Wall
    -Wextra

[env:esp32p4]
platform = espressif32
board = esp32-p4-function-ev-board
framework = espidf
build_flags =
    ${env.build_flags}
    -DBCE_PLATFORM_ESP32

[env:native]
platform = native
test_build_src = false
build_flags =
    -std=c++17
    -DBCE_PLATFORM_NATIVE
    -DBCE_VERSION_MAJOR=1
    -DBCE_VERSION_MINOR=3
    -Wall
    -Wextra
    -Ithird_party
test_framework = googletest

[env:native_gui]
platform = native
build_src_filter =
    +<gui_main.cpp>
    +<imgui_all.cpp>
    +<imgui_impl_win32_wrap.cpp>
    +<imgui_impl_dx11_wrap.cpp>
build_flags =
    -std=c++17
    -DBCE_PLATFORM_NATIVE
    -DBCE_VERSION_MAJOR=1
    -DBCE_VERSION_MINOR=3
    -Wall
    -Wextra
    -DUNICODE
    -D_UNICODE
    -Ithird_party/imgui
    -Ithird_party
    -Ithird_party/imgui/backends
    -luser32
    -lgdi32
    -lcomdlg32
    -lcomctl32
    -limm32
    -ld3d11
    -ldxgi
    -ld3dcompiler
    -ldwmapi
